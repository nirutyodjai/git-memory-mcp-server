# Git Memory MCP Server - Production Environment Variables
# Copy this file to .env.production and update with your production values

# =============================================================================
# Application Configuration
# =============================================================================
NODE_ENV=production
PORT=3000
API_VERSION=v1
APP_NAME=Git Memory MCP Server
APP_VERSION=1.2.1

# Server Configuration
MCP_SERVER_PORT=3000
MCP_SERVER_HOST=0.0.0.0
API_GATEWAY_PORT=8080
DASHBOARD_PORT=8081

# Domain Configuration
PRODUCTION_DOMAIN=gitmemory.comdee.co.th
API_BASE_URL=https://gitmemory.comdee.co.th/api
WEB_BASE_URL=https://gitmemory.comdee.co.th

# Memory Configuration
NODE_OPTIONS=--max-old-space-size=2048

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
DATABASE_URL=postgresql://git_memory_user:YOUR_POSTGRES_PASSWORD@postgres:5432/git_memory_prod
POSTGRES_DB=git_memory_prod
POSTGRES_USER=git_memory_user
POSTGRES_PASSWORD=YOUR_SECURE_POSTGRES_PASSWORD

# Database Pool Configuration
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_TIMEOUT=30000

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=YOUR_SECURE_REDIS_PASSWORD
REDIS_DB=0
REDIS_TIMEOUT=5000

# =============================================================================
# Security Configuration
# =============================================================================
JWT_SECRET=YOUR_SUPER_SECURE_JWT_SECRET_AT_LEAST_32_CHARACTERS
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Encryption
ENCRYPTION_KEY=YOUR_32_CHARACTER_ENCRYPTION_KEY_HERE
ENCRYPTION_ALGORITHM=aes-256-gcm

# Session Configuration
SESSION_SECRET=YOUR_SECURE_SESSION_SECRET_KEY
SESSION_MAX_AGE=86400000

# Admin Credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=CHANGE_THIS_SECURE_PASSWORD

# Security Configuration
CSRF_SECRET=CHANGE_THIS_CSRF_SECRET_KEY

# Security Features
ENABLE_RATE_LIMIT=true
ENABLE_CORS=true
ENABLE_CSRF=true
ENABLE_HELMET=true

# CORS Configuration
CORS_ORIGIN=https://gitmemory.comdee.co.th,https://api.comdee.co.th
CORS_CREDENTIALS=true
ALLOWED_ORIGINS=https://gitmemory.comdee.co.th,https://comdee.co.th

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================

# SSL Certificate paths (if using custom certificates)
SSL_CERT_PATH=/etc/ssl/certs/gitmemory.comdee.co.th.crt
SSL_KEY_PATH=/etc/ssl/private/gitmemory.comdee.co.th.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# Force HTTPS
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000

# =============================================================================
# Payment Integration (Stripe)
# =============================================================================
STRIPE_PUBLISHABLE_KEY=pk_live_YOUR_STRIPE_PUBLISHABLE_KEY
STRIPE_SECRET_KEY=sk_live_YOUR_STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET=whsec_YOUR_STRIPE_WEBHOOK_SECRET

# Stripe Product IDs (Production)
STRIPE_PRICE_PRO_MONTHLY=price_YOUR_PRO_MONTHLY_PRICE_ID
STRIPE_PRICE_PRO_YEARLY=price_YOUR_PRO_YEARLY_PRICE_ID
STRIPE_PRICE_ENTERPRISE_MONTHLY=price_YOUR_ENTERPRISE_MONTHLY_PRICE_ID
STRIPE_PRICE_ENTERPRISE_YEARLY=price_YOUR_ENTERPRISE_YEARLY_PRICE_ID

# Subscription Configuration
ENABLE_SUBSCRIPTIONS=true
FREE_TIER_LIMIT=100
PRO_TIER_LIMIT=10000
ENTERPRISE_TIER_LIMIT=100000

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# GitHub Integration
GITHUB_PERSONAL_ACCESS_TOKEN=YOUR_GITHUB_TOKEN_HERE
GITHUB_WEBHOOK_SECRET=YOUR_GITHUB_WEBHOOK_SECRET

# =============================================================================
# Email Configuration (SMTP)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@comdee.co.th
SMTP_PASS=YOUR_EMAIL_APP_PASSWORD

# Email Templates
EMAIL_FROM=Git Memory MCP Server <noreply@comdee.co.th>
EMAIL_SUPPORT=support@comdee.co.th

# =============================================================================
# Domain and SSL Configuration
# =============================================================================
DOMAIN=gitmemory.comdee.co.th
API_DOMAIN=api.comdee.co.th

# =============================================================================
# Monitoring and Logging
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_FILES=30
LOG_MAX_SIZE=100m
LOG_FILE_PATH=/var/log/git-memory/app.log
LOG_ERROR_FILE_PATH=/var/log/git-memory/error.log

# Enable Logging
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_LOGGING=true
ENABLE_PERFORMANCE_LOGGING=true

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9464
METRICS_PATH=/metrics
ENABLE_METRICS=true

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=5000
ENABLE_HEALTH_CHECK=true
HEALTH_CHECK_INTERVAL=60000

# =============================================================================
# Grafana Configuration
# =============================================================================
GRAFANA_ADMIN_PASSWORD=YOUR_SECURE_GRAFANA_PASSWORD
GRAFANA_SECRET_KEY=YOUR_GRAFANA_SECRET_KEY

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# API Rate Limits by Tier
RATE_LIMIT_FREE_REQUESTS=100
RATE_LIMIT_PRO_REQUESTS=1000
RATE_LIMIT_ENTERPRISE_REQUESTS=10000

# =============================================================================
# Git Memory Configuration
# =============================================================================
GIT_MEMORY_ENABLED=true
GIT_MEMORY_REPO_PATH=/app/data/git-memory
GIT_MEMORY_BRANCH=main
GIT_MEMORY_AUTO_COMMIT=true
GIT_MEMORY_COMMIT_INTERVAL=300000

# Git Configuration
GIT_USER_NAME=Git Memory MCP Server
GIT_USER_EMAIL=system@comdee.co.th

# =============================================================================
# MCP Server Configuration
# =============================================================================
MCP_MAX_SERVERS=1000
MCP_DEFAULT_SERVERS=10
MCP_SERVER_TIMEOUT=30000
MCP_HEALTH_CHECK_INTERVAL=60000
MCP_LOAD_BALANCER_ALGORITHM=round-robin

# =============================================================================
# Performance Configuration
# =============================================================================
# Memory Limits
MAX_MEMORY_USAGE=80
GC_INTERVAL=300000

# Cluster Configuration
CLUSTER_WORKERS=auto
MAX_CLUSTER_WORKERS=8

# Connection Limits
MAX_CONNECTIONS=1000
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000

# Request Timeout
REQUEST_TIMEOUT=30000

# File Upload Limits
MAX_FILE_SIZE=10485760
MAX_FILES_PER_REQUEST=10

# =============================================================================
# Backup Configuration
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=git-memory-backups
BACKUP_S3_REGION=ap-southeast-1
ENABLE_AUTO_BACKUP=true
BACKUP_INTERVAL=86400000
BACKUP_STORAGE_PATH=/var/backups/git-memory

# AWS S3 Configuration (for backups)
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
AWS_REGION=ap-southeast-1

# =============================================================================
# Notification Configuration
# =============================================================================
# Slack Notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#git-memory-alerts
SLACK_USERNAME=Git Memory Bot

# Email Notifications
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_TO=admin@comdee.co.th,devops@comdee.co.th
ALERT_EMAIL_FROM=alerts@comdee.co.th

# =============================================================================
# Feature Flags
# =============================================================================
FEATURE_PAYMENT_ENABLED=true
FEATURE_SUBSCRIPTION_ENABLED=true
FEATURE_ENTERPRISE_FEATURES=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_AUDIT_LOG_ENABLED=true

# Feature Toggles
ENABLE_API_VERSIONING=true
ENABLE_GRAPHQL=false
ENABLE_WEBSOCKETS=true
ENABLE_FILE_UPLOAD=true
ENABLE_REAL_TIME_SYNC=true

# =============================================================================
# Third-party Integrations
# =============================================================================
# Google Analytics
GA_TRACKING_ID=G-XXXXXXXXXX
GOOGLE_ANALYTICS_ID=GA_MEASUREMENT_ID

# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production

# =============================================================================
# Security Headers
# =============================================================================
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
CSP_REPORT_URI=/api/csp-report

# =============================================================================
# API Documentation
# =============================================================================
API_DOCS_ENABLED=false
API_DOCS_PATH=/api-docs
API_DOCS_TITLE=Git Memory MCP Server API
API_DOCS_VERSION=1.2.1

# =============================================================================
# Development and Debug (Set to false in production)
# =============================================================================
DEBUG=false
VERBOSE_LOGGING=false
SQL_LOGGING=false
API_RESPONSE_TIME_LOGGING=true

# =============================================================================
# Timezone and Localization
# =============================================================================
TZ=Asia/Bangkok
DEFAULT_LOCALE=en
SUPPORTED_LOCALES=en,th

# =============================================================================
# Cache Configuration
# =============================================================================
CACHE_TTL=3600
CACHE_MAX_ITEMS=10000
CACHE_CHECK_PERIOD=600

# =============================================================================
# WebSocket Configuration
# =============================================================================
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=3001
WEBSOCKET_PATH=/socket.io
WEBSOCKET_CORS_ORIGIN=https://gitmemory.comdee.co.th

# =============================================================================
# File Upload Configuration
# =============================================================================
UPLOAD_MAX_FILE_SIZE=10485760
UPLOAD_MAX_FILES=10
UPLOAD_ALLOWED_TYPES=.txt,.md,.json,.yml,.yaml
UPLOAD_DESTINATION=/app/uploads

# =============================================================================
# Maintenance Mode
# =============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1

# =============================================================================
# Custom Business Logic
# =============================================================================
# Subscription Limits
FREE_TIER_MEMORY_LIMIT=100
PRO_TIER_MEMORY_LIMIT=1000
ENTERPRISE_TIER_MEMORY_LIMIT=10000

# API Quotas
FREE_TIER_API_CALLS=1000
PRO_TIER_API_CALLS=10000
ENTERPRISE_TIER_API_CALLS=100000

# =============================================================================
# SECURITY NOTES
# =============================================================================

# IMPORTANT: Before deploying to production:
# 1. Change ALL default passwords and secrets
# 2. Use strong, randomly generated secrets
# 3. Enable SSL/TLS certificates
# 4. Configure firewall rules
# 5. Set up monitoring and alerting
# 6. Configure automated backups
# 7. Test disaster recovery procedures
# 8. Review and update security settings regularly

# =============================================================================
# DEPLOYMENT INFORMATION
# =============================================================================

# Deployment Details
DEPLOYMENT_DATE=$(date)
DEPLOYMENT_VERSION=2.0.0
DEPLOYMENT_ENVIRONMENT=production
DEPLOYMENT_SERVER=thsv15.hostatom.com
DEPLOYMENT_DOMAIN=gitmemory.comdee.co.th